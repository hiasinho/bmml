{
  "$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
  "name": "BMCLang",
  "scopeName": "source.bmclang",
  "patterns": [
    { "include": "#comment" },
    { "include": "#version" },
    { "include": "#id-reference" },
    { "include": "#id-definition" },
    { "include": "#top-level-keys" },
    { "include": "#enum-values" },
    { "include": "#meta-keys" },
    { "include": "#nested-keys" },
    { "include": "#string" },
    { "include": "#number" },
    { "include": "#boolean" },
    { "include": "#null" },
    { "include": "#array-item" },
    { "include": "#key-value" }
  ],
  "repository": {
    "comment": {
      "name": "comment.line.number-sign.bmclang",
      "match": "#.*$"
    },
    "version": {
      "match": "^(version):\\s*([\"']?1\\.0[\"']?)",
      "captures": {
        "1": { "name": "keyword.control.version.bmclang" },
        "2": { "name": "constant.numeric.version.bmclang" }
      }
    },
    "id-definition": {
      "match": "\\b(id):\\s*([\"']?)(cs|vp|ps|job|pain|gain|fit|ch|cr|rs|kr|ka|kp)-[a-z0-9-]+\\2",
      "captures": {
        "1": { "name": "entity.name.tag.id.bmclang" },
        "2": { "name": "punctuation.definition.string.bmclang" },
        "3": { "name": "entity.name.type.id-prefix.bmclang" }
      },
      "name": "entity.name.function.id.bmclang"
    },
    "id-reference": {
      "match": "([\"']?)(cs|vp|ps|job|pain|gain|fit|ch|cr|rs|kr|ka|kp)-[a-z0-9-]+\\1",
      "captures": {
        "1": { "name": "punctuation.definition.string.bmclang" },
        "2": { "name": "entity.name.type.id-prefix.bmclang" }
      },
      "name": "variable.other.reference.bmclang"
    },
    "top-level-keys": {
      "match": "^(meta|customer_segments|value_propositions|fits|channels|customer_relationships|revenue_streams|key_resources|key_activities|key_partnerships|cost_structure):",
      "captures": {
        "1": { "name": "keyword.control.toplevel.bmclang" }
      }
    },
    "meta-keys": {
      "match": "^\\s+(name|tagline|created|updated|portfolio|stage|derived_from):",
      "captures": {
        "1": { "name": "support.type.property-name.meta.bmclang" }
      }
    },
    "nested-keys": {
      "match": "^\\s+(id|name|type|description|jobs|pains|gains|products_services|pain_relievers|gain_creators|job_addressers|pain|gain|job|through|value_proposition|customer_segment|segment|segments|phases|from_segments|for_value|pricing|provides|linked_to|characteristics|major_costs|importance|severity|motivation):",
      "captures": {
        "1": { "name": "support.type.property-name.bmclang" }
      }
    },
    "enum-values": {
      "patterns": [
        {
          "match": "\\b(explore|exploit)\\b",
          "name": "constant.language.portfolio.bmclang"
        },
        {
          "match": "\\b(ideation|discovery|validation|acceleration|improve|grow|sustain|retire|transfer)\\b",
          "name": "constant.language.stage.bmclang"
        },
        {
          "match": "\\b(functional|emotional|social)\\b",
          "name": "constant.language.job-type.bmclang"
        },
        {
          "match": "\\b(low|medium|high)\\b",
          "name": "constant.language.level.bmclang"
        },
        {
          "match": "\\b(product|service|digital|financial)\\b",
          "name": "constant.language.product-type.bmclang"
        },
        {
          "match": "\\b(direct|indirect|owned|partner)\\b",
          "name": "constant.language.channel-type.bmclang"
        },
        {
          "match": "\\b(awareness|evaluation|purchase|delivery|after_sales)\\b",
          "name": "constant.language.channel-phase.bmclang"
        },
        {
          "match": "\\b(personal_assistance|dedicated|self_service|automated|community|co_creation)\\b",
          "name": "constant.language.relationship-type.bmclang"
        },
        {
          "match": "\\b(transaction|recurring|licensing|subscription|usage|advertising)\\b",
          "name": "constant.language.revenue-type.bmclang"
        },
        {
          "match": "\\b(fixed_menu|dynamic|negotiation|auction|market_dependent|volume_dependent)\\b",
          "name": "constant.language.pricing-type.bmclang"
        },
        {
          "match": "\\b(physical|intellectual|human|financial)\\b",
          "name": "constant.language.resource-type.bmclang"
        },
        {
          "match": "\\b(production|problem_solving|platform)\\b",
          "name": "constant.language.activity-type.bmclang"
        },
        {
          "match": "\\b(strategic_alliance|coopetition|joint_venture|supplier)\\b",
          "name": "constant.language.partnership-type.bmclang"
        },
        {
          "match": "\\b(optimization|risk_reduction|resource_acquisition)\\b",
          "name": "constant.language.motivation-type.bmclang"
        },
        {
          "match": "\\b(cost_driven|value_driven)\\b",
          "name": "constant.language.cost-type.bmclang"
        },
        {
          "match": "\\b(fixed_costs_heavy|variable_costs_heavy|economies_of_scale|economies_of_scope|fixed|variable)\\b",
          "name": "constant.language.cost-characteristic.bmclang"
        }
      ]
    },
    "string": {
      "patterns": [
        {
          "name": "string.quoted.double.bmclang",
          "begin": "\"",
          "end": "\"",
          "patterns": [
            {
              "name": "constant.character.escape.bmclang",
              "match": "\\\\."
            }
          ]
        },
        {
          "name": "string.quoted.single.bmclang",
          "begin": "'",
          "end": "'",
          "patterns": [
            {
              "name": "constant.character.escape.bmclang",
              "match": "\\\\."
            }
          ]
        }
      ]
    },
    "number": {
      "name": "constant.numeric.bmclang",
      "match": "\\b\\d+(\\.\\d+)?\\b"
    },
    "boolean": {
      "name": "constant.language.boolean.bmclang",
      "match": "\\b(true|false|yes|no)\\b"
    },
    "null": {
      "name": "constant.language.null.bmclang",
      "match": "\\b(null|~)\\b"
    },
    "array-item": {
      "match": "^(\\s*)-\\s*",
      "captures": {
        "1": { "name": "punctuation.definition.block.sequence.item.bmclang" }
      }
    },
    "key-value": {
      "match": "^(\\s*)([\\w_-]+):",
      "captures": {
        "2": { "name": "entity.name.tag.yaml.bmclang" }
      }
    }
  }
}
