{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://bmclang.dev/schemas/bmclang.schema.json",
  "title": "BMCLang Business Model",
  "description": "A YAML-based format for describing business models, based on Alexander Osterwalder's work",
  "type": "object",
  "required": ["version", "meta"],
  "additionalProperties": false,
  "properties": {
    "version": {
      "type": "string",
      "description": "BMCLang format version",
      "const": "1.0"
    },
    "meta": {
      "$ref": "#/$defs/Meta"
    },
    "customer_segments": {
      "type": "array",
      "description": "Customer segments the business targets",
      "items": {
        "$ref": "#/$defs/CustomerSegment"
      }
    },
    "value_propositions": {
      "type": "array",
      "description": "Value propositions offered to customer segments",
      "items": {
        "$ref": "#/$defs/ValueProposition"
      }
    },
    "fits": {
      "type": "array",
      "description": "Connections between value propositions and customer segments",
      "items": {
        "$ref": "#/$defs/Fit"
      }
    },
    "channels": {
      "type": "array",
      "description": "Channels to reach customer segments",
      "items": {
        "$ref": "#/$defs/Channel"
      }
    },
    "customer_relationships": {
      "type": "array",
      "description": "Types of relationships with customer segments",
      "items": {
        "$ref": "#/$defs/CustomerRelationship"
      }
    },
    "revenue_streams": {
      "type": "array",
      "description": "Revenue streams from customer segments",
      "items": {
        "$ref": "#/$defs/RevenueStream"
      }
    },
    "key_resources": {
      "type": "array",
      "description": "Key resources needed to deliver value propositions",
      "items": {
        "$ref": "#/$defs/KeyResource"
      }
    },
    "key_activities": {
      "type": "array",
      "description": "Key activities needed to deliver value propositions",
      "items": {
        "$ref": "#/$defs/KeyActivity"
      }
    },
    "key_partnerships": {
      "type": "array",
      "description": "Key partnerships that provide resources or activities",
      "items": {
        "$ref": "#/$defs/KeyPartnership"
      }
    },
    "cost_structure": {
      "$ref": "#/$defs/CostStructure"
    }
  },
  "$defs": {
    "Meta": {
      "type": "object",
      "description": "Business model metadata",
      "required": ["name", "portfolio", "stage"],
      "additionalProperties": false,
      "properties": {
        "name": {
          "type": "string",
          "description": "Name of the business model"
        },
        "tagline": {
          "type": "string",
          "description": "One-liner description"
        },
        "created": {
          "type": "string",
          "format": "date",
          "description": "Creation date (ISO 8601)"
        },
        "updated": {
          "type": "string",
          "format": "date",
          "description": "Last updated date (ISO 8601)"
        },
        "portfolio": {
          "type": "string",
          "enum": ["explore", "exploit"],
          "description": "Portfolio position (Osterwalder's Invincible Company)"
        },
        "stage": {
          "type": "string",
          "description": "Current stage within the portfolio"
        },
        "derived_from": {
          "type": "string",
          "description": "Relative path to parent business model file"
        }
      },
      "allOf": [
        {
          "if": {
            "properties": {
              "portfolio": { "const": "explore" }
            }
          },
          "then": {
            "properties": {
              "stage": {
                "enum": ["ideation", "discovery", "validation", "acceleration", "transfer"]
              }
            }
          }
        },
        {
          "if": {
            "properties": {
              "portfolio": { "const": "exploit" }
            }
          },
          "then": {
            "properties": {
              "stage": {
                "enum": ["improve", "grow", "sustain", "retire", "transfer"]
              }
            }
          }
        }
      ]
    },
    "CustomerSegment": {
      "type": "object",
      "description": "A customer segment with its profile (jobs, pains, gains)",
      "required": ["id", "name"],
      "additionalProperties": false,
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^cs-[a-z0-9-]+$",
          "description": "Unique identifier with cs- prefix"
        },
        "name": {
          "type": "string",
          "description": "Name of the customer segment"
        },
        "description": {
          "type": "string",
          "description": "Who they are"
        },
        "jobs": {
          "type": "array",
          "description": "Jobs to be done",
          "items": {
            "$ref": "#/$defs/Job"
          }
        },
        "pains": {
          "type": "array",
          "description": "Customer pains",
          "items": {
            "$ref": "#/$defs/Pain"
          }
        },
        "gains": {
          "type": "array",
          "description": "Customer gains",
          "items": {
            "$ref": "#/$defs/Gain"
          }
        }
      }
    },
    "Job": {
      "type": "object",
      "description": "A job the customer is trying to accomplish",
      "required": ["id", "type", "description"],
      "additionalProperties": false,
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^job-[a-z0-9-]+$",
          "description": "Unique identifier with job- prefix"
        },
        "type": {
          "type": "string",
          "enum": ["functional", "emotional", "social"],
          "description": "Type of job"
        },
        "description": {
          "type": "string",
          "description": "What they're trying to accomplish"
        },
        "importance": {
          "type": "string",
          "enum": ["low", "medium", "high"],
          "description": "Importance level"
        }
      }
    },
    "Pain": {
      "type": "object",
      "description": "A customer pain point",
      "required": ["id", "description"],
      "additionalProperties": false,
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^pain-[a-z0-9-]+$",
          "description": "Unique identifier with pain- prefix"
        },
        "description": {
          "type": "string",
          "description": "What frustrates them or blocks them"
        },
        "severity": {
          "type": "string",
          "enum": ["low", "medium", "high"],
          "description": "Severity level"
        }
      }
    },
    "Gain": {
      "type": "object",
      "description": "A desired customer gain",
      "required": ["id", "description"],
      "additionalProperties": false,
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^gain-[a-z0-9-]+$",
          "description": "Unique identifier with gain- prefix"
        },
        "description": {
          "type": "string",
          "description": "What they want to achieve or experience"
        },
        "importance": {
          "type": "string",
          "enum": ["low", "medium", "high"],
          "description": "Importance level"
        }
      }
    },
    "ValueProposition": {
      "type": "object",
      "description": "A value proposition with its products/services",
      "required": ["id", "name"],
      "additionalProperties": false,
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^vp-[a-z0-9-]+$",
          "description": "Unique identifier with vp- prefix"
        },
        "name": {
          "type": "string",
          "description": "Name of the value proposition"
        },
        "description": {
          "type": "string",
          "description": "What you offer"
        },
        "products_services": {
          "type": "array",
          "description": "Products and services that deliver this value",
          "items": {
            "$ref": "#/$defs/ProductService"
          }
        }
      }
    },
    "ProductService": {
      "type": "object",
      "description": "A product or service offering",
      "required": ["id", "type", "description"],
      "additionalProperties": false,
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^ps-[a-z0-9-]+$",
          "description": "Unique identifier with ps- prefix"
        },
        "type": {
          "type": "string",
          "enum": ["product", "service", "digital", "financial"],
          "description": "Type of product/service"
        },
        "description": {
          "type": "string",
          "description": "What it is"
        }
      }
    },
    "Fit": {
      "type": "object",
      "description": "A fit between a value proposition and customer segment",
      "required": ["id", "value_proposition", "customer_segment"],
      "additionalProperties": false,
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^fit-[a-z0-9-]+$",
          "description": "Unique identifier with fit- prefix"
        },
        "value_proposition": {
          "type": "string",
          "pattern": "^vp-[a-z0-9-]+$",
          "description": "Reference to a value proposition"
        },
        "customer_segment": {
          "type": "string",
          "pattern": "^cs-[a-z0-9-]+$",
          "description": "Reference to a customer segment"
        },
        "pain_relievers": {
          "type": "array",
          "description": "How products/services relieve customer pains",
          "items": {
            "$ref": "#/$defs/PainReliever"
          }
        },
        "gain_creators": {
          "type": "array",
          "description": "How products/services create customer gains",
          "items": {
            "$ref": "#/$defs/GainCreator"
          }
        },
        "job_addressers": {
          "type": "array",
          "description": "How products/services address customer jobs",
          "items": {
            "$ref": "#/$defs/JobAddresser"
          }
        }
      }
    },
    "PainReliever": {
      "type": "object",
      "description": "How a product/service relieves a specific pain",
      "required": ["pain", "through"],
      "additionalProperties": false,
      "properties": {
        "pain": {
          "type": "string",
          "pattern": "^pain-[a-z0-9-]+$",
          "description": "Reference to a pain"
        },
        "through": {
          "type": "array",
          "items": {
            "type": "string",
            "pattern": "^ps-[a-z0-9-]+$"
          },
          "minItems": 1,
          "description": "Products/services that relieve this pain"
        },
        "description": {
          "type": "string",
          "description": "How it relieves the pain"
        }
      }
    },
    "GainCreator": {
      "type": "object",
      "description": "How a product/service creates a specific gain",
      "required": ["gain", "through"],
      "additionalProperties": false,
      "properties": {
        "gain": {
          "type": "string",
          "pattern": "^gain-[a-z0-9-]+$",
          "description": "Reference to a gain"
        },
        "through": {
          "type": "array",
          "items": {
            "type": "string",
            "pattern": "^ps-[a-z0-9-]+$"
          },
          "minItems": 1,
          "description": "Products/services that create this gain"
        },
        "description": {
          "type": "string",
          "description": "How it creates the gain"
        }
      }
    },
    "JobAddresser": {
      "type": "object",
      "description": "How a product/service addresses a specific job",
      "required": ["job", "through"],
      "additionalProperties": false,
      "properties": {
        "job": {
          "type": "string",
          "pattern": "^job-[a-z0-9-]+$",
          "description": "Reference to a job"
        },
        "through": {
          "type": "array",
          "items": {
            "type": "string",
            "pattern": "^ps-[a-z0-9-]+$"
          },
          "minItems": 1,
          "description": "Products/services that address this job"
        },
        "description": {
          "type": "string",
          "description": "How it addresses the job"
        }
      }
    },
    "Channel": {
      "type": "object",
      "description": "A channel to reach customer segments",
      "required": ["id", "name", "type"],
      "additionalProperties": false,
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^ch-[a-z0-9-]+$",
          "description": "Unique identifier with ch- prefix"
        },
        "name": {
          "type": "string",
          "description": "Name of the channel"
        },
        "type": {
          "type": "string",
          "enum": ["direct", "indirect", "owned", "partner"],
          "description": "Type of channel"
        },
        "segments": {
          "type": "array",
          "items": {
            "type": "string",
            "pattern": "^cs-[a-z0-9-]+$"
          },
          "description": "Customer segments reached through this channel"
        },
        "phases": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["awareness", "evaluation", "purchase", "delivery", "after_sales"]
          },
          "description": "Channel phases covered"
        }
      }
    },
    "CustomerRelationship": {
      "type": "object",
      "description": "A type of relationship with a customer segment",
      "required": ["id", "segment", "type"],
      "additionalProperties": false,
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^cr-[a-z0-9-]+$",
          "description": "Unique identifier with cr- prefix"
        },
        "segment": {
          "type": "string",
          "pattern": "^cs-[a-z0-9-]+$",
          "description": "Reference to a customer segment"
        },
        "type": {
          "type": "string",
          "enum": ["personal_assistance", "dedicated", "self_service", "automated", "community", "co_creation"],
          "description": "Type of relationship"
        },
        "description": {
          "type": "string",
          "description": "How you interact with this segment"
        }
      }
    },
    "RevenueStream": {
      "type": "object",
      "description": "A revenue stream from customer segments",
      "required": ["id", "name", "type"],
      "additionalProperties": false,
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^rs-[a-z0-9-]+$",
          "description": "Unique identifier with rs- prefix"
        },
        "name": {
          "type": "string",
          "description": "Name of the revenue stream"
        },
        "type": {
          "type": "string",
          "enum": ["transaction", "recurring", "licensing", "subscription", "usage", "advertising"],
          "description": "Type of revenue stream"
        },
        "from_segments": {
          "type": "array",
          "items": {
            "type": "string",
            "pattern": "^cs-[a-z0-9-]+$"
          },
          "description": "Customer segments this revenue comes from"
        },
        "for_value": {
          "type": "string",
          "pattern": "^vp-[a-z0-9-]+$",
          "description": "Reference to value proposition"
        },
        "pricing": {
          "type": "string",
          "enum": ["fixed_menu", "dynamic", "negotiation", "auction", "market_dependent", "volume_dependent"],
          "description": "Pricing mechanism"
        }
      }
    },
    "KeyResource": {
      "type": "object",
      "description": "A key resource needed to deliver value",
      "required": ["id", "name", "type"],
      "additionalProperties": false,
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^kr-[a-z0-9-]+$",
          "description": "Unique identifier with kr- prefix"
        },
        "name": {
          "type": "string",
          "description": "Name of the resource"
        },
        "type": {
          "type": "string",
          "enum": ["physical", "intellectual", "human", "financial"],
          "description": "Type of resource"
        },
        "description": {
          "type": "string",
          "description": "Details about the resource"
        },
        "for_value": {
          "type": "array",
          "items": {
            "type": "string",
            "pattern": "^vp-[a-z0-9-]+$"
          },
          "description": "Value propositions that need this resource"
        }
      }
    },
    "KeyActivity": {
      "type": "object",
      "description": "A key activity needed to deliver value",
      "required": ["id", "name", "type"],
      "additionalProperties": false,
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^ka-[a-z0-9-]+$",
          "description": "Unique identifier with ka- prefix"
        },
        "name": {
          "type": "string",
          "description": "Name of the activity"
        },
        "type": {
          "type": "string",
          "enum": ["production", "problem_solving", "platform"],
          "description": "Type of activity"
        },
        "description": {
          "type": "string",
          "description": "Details about the activity"
        },
        "for_value": {
          "type": "array",
          "items": {
            "type": "string",
            "pattern": "^vp-[a-z0-9-]+$"
          },
          "description": "Value propositions that require this activity"
        }
      }
    },
    "KeyPartnership": {
      "type": "object",
      "description": "A key partnership that provides resources or activities",
      "required": ["id", "name", "type", "motivation"],
      "additionalProperties": false,
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^kp-[a-z0-9-]+$",
          "description": "Unique identifier with kp- prefix"
        },
        "name": {
          "type": "string",
          "description": "Name of the partner"
        },
        "type": {
          "type": "string",
          "enum": ["strategic_alliance", "coopetition", "joint_venture", "supplier"],
          "description": "Type of partnership"
        },
        "motivation": {
          "type": "string",
          "enum": ["optimization", "risk_reduction", "resource_acquisition"],
          "description": "Motivation for the partnership"
        },
        "provides": {
          "type": "array",
          "items": {
            "type": "string",
            "pattern": "^(kr|ka)-[a-z0-9-]+$"
          },
          "description": "Resources or activities this partner provides"
        }
      }
    },
    "CostStructure": {
      "type": "object",
      "description": "The cost structure of the business model",
      "required": ["type"],
      "additionalProperties": false,
      "properties": {
        "type": {
          "type": "string",
          "enum": ["cost_driven", "value_driven"],
          "description": "Cost structure type"
        },
        "characteristics": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["fixed_costs_heavy", "variable_costs_heavy", "economies_of_scale", "economies_of_scope"]
          },
          "description": "Cost structure characteristics"
        },
        "major_costs": {
          "type": "array",
          "description": "Major cost items",
          "items": {
            "$ref": "#/$defs/MajorCost"
          }
        }
      }
    },
    "MajorCost": {
      "type": "object",
      "description": "A major cost item",
      "required": ["name", "type"],
      "additionalProperties": false,
      "properties": {
        "name": {
          "type": "string",
          "description": "Name of the cost"
        },
        "type": {
          "type": "string",
          "enum": ["fixed", "variable"],
          "description": "Type of cost"
        },
        "linked_to": {
          "type": "array",
          "items": {
            "type": "string",
            "pattern": "^(kr|ka)-[a-z0-9-]+$"
          },
          "description": "Resources or activities this cost is linked to"
        }
      }
    }
  }
}
