#!/bin/bash
# Lint the codebase
# Usage: bin/lint

set -e

cd "$(dirname "$0")/.."

echo "Linting..."

# Check YAML syntax in examples
for file in examples/*.bmc; do
  if [ -f "$file" ]; then
    echo "Checking YAML syntax: $file"
    ruby -ryaml -e "YAML.safe_load(File.read('$file'))" || exit 1
  fi
done

# Check JSON syntax in schema
for file in schema/*.json; do
  if [ -f "$file" ]; then
    echo "Checking JSON syntax: $file"
    ruby -rjson -e "JSON.parse(File.read('$file'))" || exit 1
  fi
done

echo ""
echo "Lint passed!"
